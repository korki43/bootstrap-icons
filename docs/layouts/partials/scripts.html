<script src="/assets/js/bootstrap.min.js" async></script>
{{- if .IsHome }}
<script src="/assets/js/list.min.js"></script>
<script>
  var searchInput = document.querySelector('#icons-body input#search')
  var filter = new URLSearchParams(location.search).get('filter')
  var iconList = new List('icons-body', {
    valueNames: ['name', { data: ['tags'] }]
  })

  if (filter !== null) {
    searchInput.value = filter
    iconList.search(filter)
  }

  iconList.on('searchComplete', function() {
    var searchTerm = searchInput.value
    var newUrl = new URL(location)

    if (searchTerm.length > 0) {
      newUrl.searchParams.set('filter', searchTerm)
    } else {
      newUrl.searchParams.delete('filter')
    }

    history.replaceState(null, null, newUrl)
  });
</script>
{{- end }}

{{- $vendor := resources.Match "js/vendor/*.js" -}}
{{- $js := resources.Match "js/*.js" -}}
{{- $docsJs := append $js $vendor | resources.Concat "assets/js/application.js" -}}

{{- if eq hugo.Environment "production" -}}
  {{- $docsJs = $docsJs | resources.Minify -}}
{{- end }}
<script src="{{ $docsJs.Permalink | relURL }}" async></script>
